## Общая цель

Этот набор функций используется для распознавания текста с изображений чеков с помощью библиотеки EasyOCR, а затем — для извлечения:

* Общей суммы по чеку.
* Перечня заказанных блюд (наименования, количество, стоимость).

---

### Функция get_ocr_data(reader: easyocr.Reader(), img_path: str, **kwargs) -> list:

### Назначение

Распознаёт текст с изображения чека, используя EasyOCR.

### Аргументы

* reader (easyocr.Reader): Экземпляр Reader, настроенный на русский язык.
* img_path (str): Путь к изображению чека.
* **kwargs: Зарезервированы для будущего использования (пока не используются).

### Процесс

* Использует reader.readtext() для анализа изображения.
* Параметры width_ths и height_ths управляют фильтрацией и масштабом анализа.

### Возвращает

Список кортежей: [(bounding_box, text, confidence), ...].

---

### Функция get_total_sum(data: list) -> dict[str: float]:

### Назначение

Извлекает итоговую сумму из списка распознанных строк (результатов OCR).

### Аргументы

* data (list): Результаты OCR — список кортежей.

### Процесс

* Преобразует текст в нижний регистр и убирает лишние пробелы.
* Ищет ключевые слова: "итог", "всего", "к оплат".
* После ключевого слова пытается найти сумму в ближайших строках (возможно на строку или две дальше).
* При необходимости извлекает число, даже если оно было объединено с текстом при распознавании.

### Возвращает

Словарь с найденной суммой: {"sum": 285.50}
Или None, если сумма не найдена.

---

### get_servings(data: list) -> list:

### Назначение

Извлекает позиции из чека: наименование блюда, количество и цену за единицу.

### Аргументы

* data (list): Результаты OCR — список кортежей с bounding box и текстом.

### Процесс

<ol>
    <li>
        Ищет заголовки колонок: наименования, количество, сумма.
    </li>
    <li>
        Вычисляет границы колонок по координатам (bounding boxes).
    </li>
    <li>
        Переходит к строкам после заголовков и начинает извлекать информацию:
    </li>
        <ul>
            <li>
                Определяет, какой текст к какой колонке относится по положению.
            </li>
            <li>
                Обрабатывает случаи слипшихся данных (например, Котлета 2 150.00).
            </li>
        </ul>
    <li>
        Если позиция содержит количество > 1, пересчитывает цену за единицу.
    </li>
</ol>

### Возвращает

Список словарей с позициями блюд:
Ключи:

* 'name'
* 'amount'
* 'sum'

---

## Вспомогательная функция is_numeric(s: str) -> bool:

Функция проверяет, можно ли строку интерпретировать как число (int или float).
